<!DOCTYPE html>
<html>
<head>

  <title> CES utility </title>
  
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>

  <link rel="stylesheet" href="./includes/a.css">
  <link rel="icon" href="./includes/a_green.png">
  <script src="./includes/a.js"></script>
  
  <script src='Box.js'></script>

  
  <script src="./includes/katex/katex.min.js"></script>
  <link rel="stylesheet" href="./includes/katex/katex.min.css" >

  <script src="./setup.js"></script>
  <script src="./setup_indifference_curve.js"></script>
  <script src="./setup_utility_vs_delta.js"></script>
  <script src="./setup_marshallian_demand.js"></script>
</head>

<body>


</div>

<div class='section margin padding border'>

  <div class='section margin padding'>

    <h4> ces utility </h4>
    <p><span class='math'> u = \bigg ( \displaystyle\sum  x_i^{\alpha}   \bigg )^{ 1 / \delta } </span> where <span class='math'> \alpha, \delta \in (-\infin, 1) </span></p>
    
    <p> normally <span class='math'>\alpha</span> and <span class='math'>\delta</span> are the same, but im distinguishing them bc i think it can reveal some interesting things </p>
    <p> sometimes we see this form : </p>

    <p><span class='math'> u = \displaystyle\sum  \dfrac{ x_i^{1/ \alpha} }{\alpha}  </span></p>
    
  </div>
</div>

<div class='section margin padding border'>

  <p> marshallian demand. </p>
  <p> the model. u is subject to a linear cost function as an equality constraint. <span class='math'> L = U + \lambda \cdot (M - \sum px) </span> gives us the FOCs as n equations of the form [1] <span class='math'> L_i = u_i - \lambda \cdot p_i = 0</span>, along with the (n+1)th equation <span class='math'> L_{\lambda} = M - \sum px = 0 </span></p> 

  <p><span class='math'> u = z^{1/\delta}</span>, so that [2] <span class='math'> u_1 = \frac{1}{\delta} u z^{-1} \alpha x_1^{\alpha-1} </span></p>
  
  <p> using [1] + [2] we can write <span class='math'> \lambda = \dfrac{u_1}{p_1} </span> for all the n equations. strategically, it makes sense to solve all the n equations in terms of <span class='math'>x_1</span>. starting with <span class='math'>x_2</span>. </p>
  
  <p> [3] <span class='math'> \dfrac{u_1}{p_1} = \dfrac{u_2}{p_2} \implies \dfrac{\frac{1}{\delta} u z^{-1} \alpha x_1^{\alpha-1}}{p_1} = \dfrac{\frac{1}{\delta} u z^{-1} \alpha x_2^{\alpha-1}}{p_2} </span> which gives <span class='math'> \bigg [ \dfrac{p_2}{p_1} \cdot x_1^{\alpha-1} = x_2^{\alpha-1} \bigg ] ^{\frac{1}{\alpha-1}} </span> and the result [4] <span class='math'> \bigg ( \dfrac{p_2}{p_1} \bigg )^{\frac{1}{\alpha-1}} x_1 = x_2 </span> </p>
  
  <p> the reason i wanted to distinguish <span class='math'>\alpha</span> and <span class='math'>\delta</span> is because we can see from this that the <span class='math'>\delta</span> parameters cancel out.</p>
  
  <p> you will have n equations like this. dont be stupid. write every <span class='math'>x_i</span> as a function of <span class='math'>x_1</span>, including <span class='math'>x_1</span>, and sub them into the budget constraint <span class='math'>L_{\lambda}</span> </p>
  
  <p><span class='math'> M = p_1 \Bigg [ \bigg ( \dfrac{p_1}{p_1} \bigg )^{\frac{1}{\alpha-1}} x_1 \Bigg ] + p_2 \Bigg [ \bigg ( \dfrac{p_2}{p_1} \bigg )^{\frac{1}{\alpha-1}} x_1 \Bigg ] + \dots + p_n \Bigg [ \bigg ( \dfrac{p_n}{p_1} \bigg )^{\frac{1}{\alpha-1}} x_1 \Bigg ] </span></p>
  
  <p> [5] <span class='math'> M = x_1 \cdot p_1 ^ { \frac{1}{1-\alpha} } \cdot \underbrace{ \displaystyle\sum p_k^{ \frac{\alpha}{\alpha-1} } }_{S} </span></p>
  
  <p> because of symmetry, we get [6] : </p>
  <div class='section border padding'><span class='math'> x_i^* = \dfrac{M}{S} \cdot p_i^{ \frac{1}{\alpha-1} } </span></div>
  <p> be careful when testing. x* gets you the max u, but z wont necessarily be a max. you must look at u </p>
  
</div>

<div class='section margin padding border'>

  <p> im interested in the case where delta = 1, so that were just looking at something like <span class='math'> u= \sum x_i^{\alpha}</span>
  
  <p> why even bother with delta ? if alpha is positive, no problem. if alpha is negative, then just make u have a negative term. the delta convolutes things </p>
  
  <p> what if we looked at monotonic transforms of u AT the solution x*, not just generally monotonic xforms ? </p>
</div>


<div class='section margin padding border'>

  <div class='section margin padding'>
    <h4> the indifference curve </h4>
    <p> i just picked a point at random, like <span class='inline-code'>(5.5,4.7)</span>. then given delta, alpha, beta, solved for u. then used u to plot the idc </p>
  </div>
 
  <div class='box margin padding'>

  <table class='mytable'>
    <tr><td><span class='math'>\delta</span> : delta </td><td><input class='myinputs' type='number' value=0.01 step=0.01 id='myinput_delta_idc' /></td></tr>
    <tr><td><span class='math'>\alpha</span> : alpha </td><td><input class='myinputs' type='number' value=0.70 step=0.01 id='myinput_alpha_idc' /></td></tr>
    <tr><td><span class='math'>\beta</span> : beta </td><td><input class='myinputs' type='number' value=0.40 step=0.01 id='myinput_beta_idc' /></td></tr>
  </table>


  <pre class='code'>
   
  let obj = {
   'delta':delta,
   'alpha':alpha,  
   'beta':beta,
   'u':null,
   'x':5.5,
   'y':4.7
  }
  
  b.LINE_WIDTH(2);
  b.STROKE_STYLE('#fc0a');
  b.SHOW_CES_INDIFFERENCE_CURVE(obj);
   
  b.FILL_STYLE('#fc0a');
  b.RADIUS(2);
  b.SHOW_VALUE(obj);

  </pre>


  </div>

  <div class='box margin padding' id='container_indifference_curve'></div>
  
  <div class='section margin padding'>
    <h4> a comment on graphing </h4>
    <p> i start with an x and y, and calculate u. then i loop over x to get y, and y to get x, using the given u. but i need to make sure not to add values when looping outside the domain or range, or else the graphs will start looking very odd. </p> 

    <p> that criteria is : <span class='math'> u^{\delta} \ge \alpha \cdot x^{\delta}</span> when looping over x, and <span class='math'> u^{\delta} \ge \beta \cdot y^{\delta}</span> when looping over y. </p>
    
    <p> its not something i thot of before i tried graphing it, and we dont see it often because we always use log preferences, where <span class='math'>\delta = 0</span>, which is the only case where both the domain and range are <span class='math'>(0, \infin)</span></p>

    <p> its written into <span class='inline-code'>SHOW_CES_INDIFFERENCE_CURVE()</span></p>

    <p> ** to confirm this numerically, i should plot the gradient. ces utility. pick a point. and get the utility. then, color all the points within 1% utility the same color, like a gradient. </p>
    
  </div>
  

</div> <!-- closing bordered section -->

<div class='section margin padding border'>

  <div class='section margin padding'>
    <h4> its form </h4>
  </div>
  
  <div class='box margin padding'>
  
  <table class='mytable'>
    <tr>
      <td><p> desc</p></td>
      <td><p> desc</p></td>
      <td><p> form </p></td>
      <td><p> desc</p></td>
      <td><p> for graphing </p></td>
    </tr>
  
  
    <tr>
      <td>
        <p> Linear </p>
        <p><span class='math'> \delta = 1 </span></p>
      </td>
      
      <td><p> sub <span class='inline-code'>&delta; = 1</span> into <span class='inline-code'>u</span> </p></td>
      <td><span class='math'> u = \alpha x + \beta y </span></td>
      <td><p> just rearrange </p></td>
      <td><p><span class='math'> y = \frac{1}{\beta} \cdot (u - \alpha \cdot x) </span></p>
          <p><span class='math'> y_{int} = \big ( 0, \frac{u}{\beta} \big ) </span></p>
          <p><span class='math'> x_{int} = \big ( \frac{u}{\alpha}, 0 \big )  </span></p></td>
    </tr>
    
    <tr>
      <td>
        <p> Log </p>
        <p><span class='math'> \delta = 0 </span></p>
      </td>
      <td>
        <div> take the total derivative of <span class='math'>U</span></div>
        <p><span class='math'>dU = \frac{\partial U}{\partial x} \cdot dx + \frac{\partial U}{\partial y} \cdot dy </span></p>
        <p><span class='math'>dU = \alpha \big ( \frac{U}{x} \big )^{1-\delta} \cdot dx + \beta \big ( \frac{U}{y} \big )^{1-\delta} \cdot dy </span></p>
        <div> sub <span class='math'>\delta = 0</span> and integrate </div>
        <p><span class='math'>\int \frac{1}{U} dU = \alpha \int \frac{1}{x} dx + \beta \int \frac{1}{y} dy</span></p>
      </td>
      <td><p><span class='math'> u = \alpha \ln x + \beta \ln y </span></p>
          <p><span class='math'> u = x^{\alpha} \cdot y^{\beta} </span></p>
      <td><p> just rearrange </p></td>
      <td><p><span class='math'> \cdot </span></p>
          <p><span class='math'> y = \bigg ( \dfrac{u}{x^{\alpha}} \bigg ) ^ {\frac{1}{\beta}} </span></p></td>
    </tr>
    
    <tr>
      <td><p> Leontieff </p><p><span class='math'> \delta = -\infin </span></p></td>
      <td><p> theres a tricky limit </p></td>
      <td><p> ** <span class='math'> u = \min(x,y) </span></p></td>
      <td><p> ** </p></td>
      <td><p> **</p></td>
    </tr>
    
    <tr>
      <td><p> Else </p><p><span class='math'> 0 \lt \delta \lt 1 </span></p>
          <p><span class='math'> -\infin \lt \delta \lt 0 </span></p></td>
      <td><p> nothing </p></td>
      <td><span class='math'> u = \big ( \alpha \cdot x^{\delta} + \beta \cdot y^{\delta} \big ) ^ { 1 / \delta } </span></td>
      <td><p> just rearrange </p></td>
      <td>
        <p><span class='math'> y = \Big ( \dfrac{u^{\delta} - \alpha \cdot x^{\delta}}{\beta} \Big ) ^ {\frac{1}{\delta}} </span> where <span class='math'> u^{\delta} \ge \alpha \cdot x^{\delta}</span></p>
        <p><span class='math'> x = \Big ( \dfrac{u^{\delta} - \beta \cdot x^{\delta}}{\alpha} \Big ) ^ {\frac{1}{\delta}} </span> where <span class='math'> u^{\delta} \ge \beta \cdot y^{\delta}</span></p>
      </td>
    </tr>
  </table>
  
  </div>

</div>


<div class='section margin padding border'>

  <div class='section margin padding'><h4> utility & the marshallian allocation vs delta </h4></div>

  <div class='box margin padding'>
  <table class='mytable'>
    <tr><td><span class='math'> \delta </span> : delta </td><td><input class='myinputs' type='number' value="-1.92" step=0.01 id='myinput_delta_uvd' /></td></tr>
    <tr><td><span class='math'> \alpha </span> : alpha </td><td><input class='myinputs' type='number' value=0.7 step=0.01 id='myinput_alpha_uvd' /></td></tr>
    <tr><td><span class='math'> \beta </span> : beta </td><td><input class='myinputs' type='number' value=0.4 step=0.01 id='myinput_beta_uvd' /></td></tr>
    <tr><td><span class='math'> p_x </span> : price of x </td><td><input class='myinputs' type='number' value=1 step=0.01 id='myinput_px_uvd' /></td></tr>
    <tr><td><span class='math'> p_y </span> : price of y </td><td><input class='myinputs' type='number' value=1.2 step=0.01 id='myinput_py_uvd' /></td></tr>
    <tr><td><span class='math'> M </span> : budget </td><td><input class='myinputs' type='number' value=10 step=1 id='myinput_budget_uvd' /></td></tr>
    <tr><td><span class='math'> A = \frac{p_y}{p_x} \cdot \frac{\alpha}{\beta} </span></td><td class='myoutputs'><span id='myoutput_A_uvd'></span></td></tr>
    <tr><td><span class='math'> B = \frac{1}{\delta - 1} </span></td><td class='myoutputs'><span id='myoutput_B_uvd'></span></td></tr>
    <tr><td><span class='math'> \frac{y}{x} = A^{B} </span></td><td class='myoutputs'><span id='myoutput_C_uvd'></span></td></tr>
    
    <!-- <tr><td></td><td></td></tr> -->
  </table>
  </div>
  
  <div class='box margin padding'>
  
  <div class='section'>
  
  <div class='box' id='container_utility_vs_delta'></div>

  <div class='box margin padding' style='vertical-align: middle;'>
        <table class='untable'>
          <tr><td><div> utility </div></td>
              <td><div style='display: inline-block; vertical-align: middle; margin: 1vh; width: 50px;'>
                <div class='' style='border-bottom: 3px solid #fc0a;'></div>
                <div class=''></div>
              </div></td></tr>
          <tr><td><div> x </div></td>
              <td><div style='display: inline-block; vertical-align: middle; margin: 1vh; width: 50px;'>
                <div class='' style='border-bottom: 3px solid #28fa;'></div>
                <div class=''></div>
              </div></td></tr>
          <tr><td><div> y </div></td>
              <td><div style='display: inline-block; vertical-align: middle; margin: 1vh; width: 50px;'>
                <div class='' style='border-bottom: 3px solid #6c9a;'></div>
                <div class=''></div>
              </div></td></tr>
        </table>
  </div>
  
  
  </div>
  
  </div>

</div>




</div>

</body>

<script></script>

</html>