<!DOCTYPE html>
<html>
<head>

  <title> CES utility </title>
  
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>

  <link rel="stylesheet" href="./includes/a.css">
  <link rel="icon" href="./includes/a_green.png">
  <script src="./includes/a.js"></script>
  
  <script src='./includes/r_box.js'></script>

  
  <script src="./includes/katex/katex.min.js"></script>
  <link rel="stylesheet" href="./includes/katex/katex.min.css" >

  <script src="./setup.js"></script>
  <script src="./setup_indifference_curve.js"></script>
  <script src="./setup_utility_vs_delta.js"></script>
  <script src="./setup_marshallian_demand.js"></script>
  
  <style>
    
    .math {
      white-space: nowrap;
    }
    .nowrap {
      white-space: nowrap;
    }
    
  </style>
</head>

<body>


</div>

<div class='section margin padding border'>

  <div class='section margin padding'>

    <h4> ces utility </h4>
    <p><span class='math'> u = \bigg ( \displaystyle\sum  x_i^{\alpha} \bigg )^{ 1 / \delta } </span> where <span class='math'> \alpha, \delta \in (-\infin, 1) </span></p>
    <p> and we define <span class='math'> \sigma = \dfrac{1}{1-\alpha} </span></p>
    
    <p> assume <span class='math'>\alpha</span> and <span class='math'>\delta</span> are the same. im distinguishing them notationally bc i think it can reveal some interesting things </p>
    <p> sometimes we see this form : </p>

    <p><span class='math'> u = \displaystyle\sum  \dfrac{ x_i^{1/ \alpha} }{\alpha}  </span></p>
    
  </div>
</div>

<div class='section margin padding border'>

  <p> marshallian demand. </p>
  <p> the model. u is subject to a linear cost function as an equality constraint. <span class='math'> L = U + \lambda \cdot (M - \sum px) </span> gives us the FOCs as n equations of the form <span class='nowrap'>[1] <span class='math'> L_i = u_i - \lambda \cdot p_i = 0</span></span>, along with the (n+1)th equation <span class='math'> L_{\lambda} = M - \sum px = 0 </span></p> 

  <p><span class='math'> u = z^{1/\delta}</span>, so that <span class='nowrap'>[2] <span class='math'> u_1 = \frac{1}{\delta} u z^{-1} \alpha x_1^{\alpha-1} </span></span></p>
  
  <p> using <span class='nowrap'>[1] + [2]</span> we can write <span class='math'> \lambda = \dfrac{u_1}{p_1} </span> for all the n equations. strategically, it makes sense to solve all the n equations in terms of <span class='math'>x_1</span>. starting with <span class='math'>x_2</span>. </p>
  
  <p> <span class='nowrap'>[3] <span class='math'> \dfrac{u_1}{p_1} = \dfrac{u_2}{p_2} \implies \dfrac{\frac{1}{\delta} u z^{-1} \alpha x_1^{\alpha-1}}{p_1} = \dfrac{\frac{1}{\delta} u z^{-1} \alpha x_2^{\alpha-1}}{p_2} </span></span> which gives <span class='math'> \bigg [ \dfrac{p_2}{p_1} \cdot x_1^{\alpha-1} = x_2^{\alpha-1} \bigg ] ^{\frac{1}{\alpha-1}} </span></p>

  <p> and the result <span class='nowrap'>[4] <span class='math'> x_2 = \bigg ( \dfrac{p_1}{p_2} \bigg )^{\sigma} x_1 \implies x_2 = p_2^{-\sigma} p_1^{\sigma} x_1 </span></span> or <span class='math border margin padding'> p_2^{\sigma} x_2 = p_1^{\sigma} x_1 </span></p>
  
  <p> the reason i wanted to distinguish <span class='math'>\alpha</span> and <span class='math'>\delta</span> is because we can see from this that the <span class='math'>\delta</span> parameters cancel out.</p>
  
  <p> you will have n equations like this. dont be stupid. write every <span class='math'>x_i</span> as a function of <span class='math'>x_1</span>, including <span class='math'>x_1</span>, and sub them into the budget constraint <span class='math'>L_{\lambda}</span> </p>
  
  <!-- <p> [5a] <span class='math'> M = p_1 \Bigg [ \bigg ( \dfrac{p_1}{p_1} \bigg )^{-\sigma} x_1 \Bigg ] + p_2 \Bigg [ \bigg ( \dfrac{p_2}{p_1} \bigg )^{-\sigma} x_1 \Bigg ] + \dots + p_n \Bigg [ \bigg ( \dfrac{p_n}{p_1} \bigg )^{-\sigma} x_1 \Bigg ] </span></p> -->
  
  
  <p><span class='nowrap'> [5a] <span class='math'> M = p_1 \Big [ p_1^{-\sigma} p_1^{\sigma} x_1 \Big ] + p_2 \Big [ p_2^{-\sigma} p_1^{\sigma} x_1 \Big ] + \dots + p_n \Big [ p_n^{-\sigma} p_1^{\sigma} x_1 \Big ] </span></span></p>
  
  <p><span class='nowrap'> [5b] <span class='math'> M = p_1^{\sigma} x_1 \Big [ p_1 p_1^{-\sigma} + p_2 p_2^{-\sigma} + \dots + p_n p_n^{-\sigma} \Big ] </span></span></p>
  
  <p><span class='nowrap'> [5c] <span class='math'> M = x_1 \cdot p_1 ^ { \sigma } \cdot \underbrace{ \displaystyle\sum p_k^{1-\sigma} }_{S} </span></span> [look at how convenient result [4] is here] </p>
  
  <p> because of symmetry, we get [6] : </p>
  <div class='section border padding'><span class='math'> x_i^* = \dfrac{1}{\displaystyle\sum p_k^{1-\sigma}} \cdot \dfrac{M}{p_i^{\sigma}} = \dfrac{1}{S} \cdot \dfrac{M}{p_i^{\sigma}} </span></div>
  
</div>

<div class='section margin padding border'>
  <h4> little analysis </h4>
  <p> its clear that <u>in this case</u>, <span class='math'>\delta</span> has no influence on the optimal allocations </p>
  <p> why ? </p>
  <p> right off the bat, i think because there are no weights inside <span class='math'>z</span></p>
  <p> be careful when testing, since i shorthand wrote <span class='math'> u = z^{1/\delta}</span>, <span class='math'>x^*</span> gets you the max <span class='math'>u</span>, but depending on <span class='math'>\delta</span>, <span class='math'>z</span> wont necessarily be a max. you must look at <span class='math'>u</span> </p>
  
</div>

<div class='section margin padding border'>
  <h4> example </h4>
  <p> consider <span class='math'> u= \sqrt{x_1} + \sqrt{x_2} + \dots + \sqrt{x_n} </span></p>
  <p> in the case, you could say that <span class='math'>\delta = 1</span>. but you could also say that if  <span class='math'>\delta = \frac{1}{2}</span>, maxing <span class='math'>u</span> is the same as maxing <span class='math'>z</span>, since <span class='math'>u</span> is a positive monotonic xform of <span class='math'>z</span>. so the mapping doesnt change if we just get rid of <span class='math'>\delta</span> </p>

  <p><span class='math'>\sigma = \frac{1}{1-\frac{1}{2}} = 2 </span></p>
  <p><span class='math'> x_1^* = \dfrac{1}{\displaystyle\sum p_k^{-1}} \cdot \dfrac{M}{p_1^{2}} </span></p>
</div>

<div class='section margin padding border'>

  <div class='section margin padding'>

    <h4> a more general case </h4>
    <p> here there are coefficients to add weight to specific goods </p>
    <p><span class='math'> u = \bigg ( \displaystyle\sum  \gamma_i x_i^{\alpha} \bigg )^{ 1 / \delta } </span></p>
    <p> this gives us the following equilibrium allocation </p>
    <p> [4] : <span class='math border margin padding'> \gamma_2^{-\sigma} p_2^{\sigma} x_2 = \gamma_1^{-\sigma} p_1^{\sigma} x_1 </span></p>
    <p> this shouldnt be surprizing. the delta still only does a monotonic xform of z. that has not changed. </p>
    <p> the weights, <span class='math'>\gamma_i</span> will feature in the final allocation </p>
    
  </div>
</div>

<div class='section margin padding border'> 
  

  

  <p> why even bother with delta ? if alpha is positive, no problem. if alpha is negative, then just make u have a negative term. the delta convolutes things </p>
  
  <p> what if we looked at monotonic transforms of u AT the solution x*, not just generally monotonic xforms ? </p>
  
  <p> if alpha \gt 0, then if there are no weights, we can get rid of delta, because then it is just a monotonic xform. and it doesnt change any of the allocations </p>
  <p> remember that for x \gt 0, x^a \gt 0 for all a \in (-infin, infin) </p>
  <p> but if a \in (0, 1), then x^a \lt x </p>
  <p> if <span class='math'>u = z^{\delta}</span>, and <span class='math'>\delta \in (0,1)</span>, to optimize u means to optimize z. so you could simplify life by getting rid of alpha </p>  
</div>


<div class='section margin padding border'>

  <div class='section margin padding'>
    <h4> the indifference curve </h4>
    <p> i just picked a point at random, like <span class='inline-code'>(5.5,4.7)</span>. then given delta, alpha, beta, solved for u. then used u to plot the idc </p>
  </div>
 
  <div class='box margin padding'>

  <table class='mytable'>
    <tr><td><span class='math'>\alpha</span> : alpha </td><td><input class='myinputs' type='number' value=0.01 step=0.01 id='myinput_delta_idc' /></td></tr>
    <tr><td><span class='math'>\gamma_1</span> : coef_1 </td><td><input class='myinputs' type='number' value=0.70 step=0.01 id='myinput_alpha_idc' /></td></tr>
    <tr><td><span class='math'>\gamma_2</span> : coef_2 </td><td><input class='myinputs' type='number' value=0.40 step=0.01 id='myinput_beta_idc' /></td></tr>
  </table>

  </div>
</div>

<div class='section margin padding' id='container_indifference_curve'></div>

<div class='section margin padding border'>
  
  <div class='section margin padding'>
    <h4> a comment on graphing </h4>
    <p> i start with an x and y, and calculate u. then i loop over x to get y, and y to get x, using the given u. but i need to make sure not to add values when looping outside the domain or range, or else the graphs will start looking very odd. </p> 

    <p> that criteria is : <span class='math'> u^{\delta} \ge \alpha \cdot x^{\delta}</span> when looping over x, and <span class='math'> u^{\delta} \ge \beta \cdot y^{\delta}</span> when looping over y. </p>
    
    <p> its not something i thot of before i tried graphing it, and we dont see it often because we always use log preferences, where <span class='math'>\delta = 0</span>, which is the only case where both the domain and range are <span class='math'>(0, \infin)</span></p>

    <p> its written into <span class='inline-code'>SHOW_CES_INDIFFERENCE_CURVE()</span></p>

    <p> ** to confirm this numerically, i should plot the gradient. ces utility. pick a point. and get the utility. then, color all the points within 1% utility the same color, like a gradient. </p>
    
  </div>
  

</div> <!-- closing bordered section -->

  <div class='section border margin padding'>
    <p> Linear </p>
    <p><span class='math'> \delta = 1 </span></p>
    <p> sub <span class='inline-code'>&delta; = 1</span> into <span class='inline-code'>u</span> </p>
    <span class='math'> u = \alpha x + \beta y </span>
    <p> just rearrange </p>
    <p><span class='math'> y = \frac{1}{\beta} \cdot (u - \alpha \cdot x) </span></p>
    <p><span class='math'> y_{int} = \big ( 0, \frac{u}{\beta} \big ) </span></p>
    <p><span class='math'> x_{int} = \big ( \frac{u}{\alpha}, 0 \big )  </span></p>
  </div>

<div class='section border margin padding'>
        <p> Log </p>
        <p><span class='math'> \delta = 0 </span></p>

      
        <div> take the total derivative of <span class='math'>U</span></div>
        <p><span class='math'>dU = \sum \frac{\partial U}{\partial x_1} \cdot dx_1 = 0 </span></p>
        <p> the delta cancels out </p>
        <p> sub <span class='math'>\alpha = 0</span> and integrate wrt x1 or x2 </p>
        <p> du = 0, so that stays at 0 </p>
        
        <p><span class='math'>dU = \alpha \big ( \frac{U}{x} \big )^{1-\delta} \cdot dx + \beta \big ( \frac{U}{y} \big )^{1-\delta} \cdot dy </span></p>
        <div> sub <span class='math'>\delta = 0</span> and integrate </div>
        <p><span class='math'>\int \frac{1}{U} dU = \alpha \int \frac{1}{x} dx + \beta \int \frac{1}{y} dy</span></p>
      
      <h4> reduces to </h4>
      <p><span class='math'> u = \alpha \ln x + \beta \ln y </span></p>
      <p><span class='math'> u = x^{\alpha} \cdot y^{\beta} </span></p>
      <p> just rearrange </p>
      <p><span class='math'> \cdot </span></p>
  <p><span class='math'> y = \bigg ( \dfrac{u}{x^{\alpha}} \bigg ) ^ {\frac{1}{\beta}} </span></p>
</div>


<div class='section border margin padding'>
      <td><p> Leontieff </p><p><span class='math'> \delta = -\infin </span></p></td>
      <td><p> theres a tricky limit </p></td>
      <td><p> ** <span class='math'> u = \min(x,y) </span></p></td>
      <td><p> ** </p></td>
      <td><p> **</p></td>
</div>
    
  <div class='section border margin padding'>
    <p> Else </p><p><span class='math'> 0 \lt \delta \lt 1 </span></p>
    <p><span class='math'> -\infin \lt \delta \lt 0 </span></p>

    <p> nothing </p>
    <span class='math'> u = \big ( \alpha \cdot x^{\delta} + \beta \cdot y^{\delta} \big ) ^ { 1 / \delta } </span>
    <p> just rearrange </p>

    <p><span class='math'> y = \Big ( \dfrac{u^{\delta} - \alpha \cdot x^{\delta}}{\beta} \Big ) ^ {\frac{1}{\delta}} </span> where <span class='math'> u^{\delta} \ge \alpha \cdot x^{\delta}</span></p>
    <p><span class='math'> x = \Big ( \dfrac{u^{\delta} - \beta \cdot x^{\delta}}{\alpha} \Big ) ^ {\frac{1}{\delta}} </span> where <span class='math'> u^{\delta} \ge \beta \cdot y^{\delta}</span></p>
  </div>
 

<div class='section margin padding border'>

  <div class='section margin padding'><h4> utility & the marshallian allocation vs delta </h4></div>

  <div class='box margin padding'>
  <table class='mytable'>
    <tr><td><span class='math'> \delta </span> : delta </td><td><input class='myinputs' type='number' value="-1.92" step=0.01 id='myinput_delta_uvd' /></td></tr>
    <tr><td><span class='math'> \alpha </span> : alpha </td><td><input class='myinputs' type='number' value=0.7 step=0.01 id='myinput_alpha_uvd' /></td></tr>
    <tr><td><span class='math'> \beta </span> : beta </td><td><input class='myinputs' type='number' value=0.4 step=0.01 id='myinput_beta_uvd' /></td></tr>
    <tr><td><span class='math'> p_x </span> : price of x </td><td><input class='myinputs' type='number' value=1 step=0.01 id='myinput_px_uvd' /></td></tr>
    <tr><td><span class='math'> p_y </span> : price of y </td><td><input class='myinputs' type='number' value=1.2 step=0.01 id='myinput_py_uvd' /></td></tr>
    <tr><td><span class='math'> M </span> : budget </td><td><input class='myinputs' type='number' value=10 step=1 id='myinput_budget_uvd' /></td></tr>
    <tr><td><span class='math'> A = \frac{p_y}{p_x} \cdot \frac{\alpha}{\beta} </span></td><td class='myoutputs'><span id='myoutput_A_uvd'></span></td></tr>
    <tr><td><span class='math'> B = \frac{1}{\delta - 1} </span></td><td class='myoutputs'><span id='myoutput_B_uvd'></span></td></tr>
    <tr><td><span class='math'> \frac{y}{x} = A^{B} </span></td><td class='myoutputs'><span id='myoutput_C_uvd'></span></td></tr>
    
    <!-- <tr><td></td><td></td></tr> -->
  </table>
  </div>
</div>

<div class='section margin padding' id='container_utility_vs_delta'></div>
  
  <div class='box margin padding'>
  
  <div class='section'>
  


  <div class='box margin padding' style='vertical-align: middle;'>
        <table class='untable'>
          <tr><td><div> utility </div></td>
              <td><div style='display: inline-block; vertical-align: middle; margin: 1vh; width: 50px;'>
                <div class='' style='border-bottom: 3px solid #fc0a;'></div>
                <div class=''></div>
              </div></td></tr>
          <tr><td><div> x </div></td>
              <td><div style='display: inline-block; vertical-align: middle; margin: 1vh; width: 50px;'>
                <div class='' style='border-bottom: 3px solid #28fa;'></div>
                <div class=''></div>
              </div></td></tr>
          <tr><td><div> y </div></td>
              <td><div style='display: inline-block; vertical-align: middle; margin: 1vh; width: 50px;'>
                <div class='' style='border-bottom: 3px solid #6c9a;'></div>
                <div class=''></div>
              </div></td></tr>
        </table>
  </div>
  
  
  </div>
  
  </div>





</div>

</body>

<script></script>

</html>